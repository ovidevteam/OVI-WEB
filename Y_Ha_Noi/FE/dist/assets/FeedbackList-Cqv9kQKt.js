import{_ as G,u as H,r as c,a as W,B as q,c as g,b as p,d as t,w as a,E as K,W as Z,A as h,X as J,j as o,Y as Q,Z as X,$ as ee,a0 as te,q as ae,D as le,g as ne,o as i,h as oe,a1 as se,C as de,J as w,K as V,L as ie,a2 as re,a3 as ue,a4 as ce,p as r,a5 as pe,N as me,x as v,O as he,Q as ve,a6 as _e,P as fe,R as ge,S as be,T as ke,U as ye,e as Ee}from"./index-BgKCwKch.js";/* empty css                   *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                        *//* empty css                    *//* empty css                             */import{f as De}from"./feedbackService-D0bxWCqD.js";import{d as Te}from"./departmentService-BzlNGIw4.js";const Ce={class:"feedback-list"},Ne={class:"content-card"},Se={class:"content-card"},we={class:"content-card-header"},Ve={class:"content-cell"},Le={class:"pagination-wrapper"},Me={__name:"FeedbackList",setup(Pe){const b=ne(),P=H(),k=c(!1),y=c([]),E=c([]),D=c(0),m=c(1),T=c(20),n=W({dateFrom:null,dateTo:null,departmentId:null,status:null,level:null}),_=async()=>{k.value=!0;try{const s=await De.getList({...n,page:m.value,size:T.value});y.value=s.data||[],D.value=s.total||0}catch(s){console.error("Error fetching feedbacks:",s),y.value=[{id:1,code:"PA-20251127-001",receivedDate:"2025-11-27",channel:"HOTLINE",content:"Phản ánh về thái độ phục vụ của nhân viên khoa Nội khi tiếp nhận bệnh nhân",departmentName:"Nội khoa",level:"HIGH",status:"NEW",handlerName:"BS. Nguyễn Văn A"},{id:2,code:"PA-20251127-002",receivedDate:"2025-11-27",channel:"EMAIL",content:"Thời gian chờ khám quá lâu tại phòng khám da liễu",departmentName:"Da liễu",level:"MEDIUM",status:"PROCESSING",handlerName:"BS. Trần Thị B"},{id:3,code:"PA-20251126-003",receivedDate:"2025-11-26",channel:"DIRECT",content:"Cảm ơn bác sĩ đã tận tình điều trị cho bệnh nhân",departmentName:"Ngoại khoa",level:"LOW",status:"COMPLETED",handlerName:"BS. Lê Văn C"}],D.value=3}finally{k.value=!1}},Y=async()=>{try{E.value=await Te.getActiveList()}catch{E.value=[{id:1,name:"Nội khoa"},{id:2,name:"Ngoại khoa"},{id:3,name:"Da liễu"},{id:4,name:"Sản khoa"}]}},L=()=>{m.value=1,_()},I=()=>{Object.assign(n,{dateFrom:null,dateTo:null,departmentId:null,status:null,level:null}),L()},x=s=>{b.push(`/feedback/${s.id}`)},z=()=>{m.value=1,_()},A=()=>{_()},B=()=>{b.push("/feedback/create")},R=s=>{b.push(`/feedback/${s}`)};return q(()=>{_(),Y()}),(s,l)=>{const M=se,u=oe,C=ie,N=de,f=ae,U=K,d=me,S=ve,F=fe,O=le,$=te,j=X;return i(),g("div",Ce,[p("div",Ne,[t(U,{inline:!0,model:n,class:"filter-form"},{default:a(()=>[t(u,{label:"Từ ngày"},{default:a(()=>[t(M,{modelValue:n.dateFrom,"onUpdate:modelValue":l[0]||(l[0]=e=>n.dateFrom=e),type:"date",placeholder:"Chọn ngày",format:"DD/MM/YYYY","value-format":"YYYY-MM-DD",style:{width:"150px"}},null,8,["modelValue"])]),_:1}),t(u,{label:"Đến ngày"},{default:a(()=>[t(M,{modelValue:n.dateTo,"onUpdate:modelValue":l[1]||(l[1]=e=>n.dateTo=e),type:"date",placeholder:"Chọn ngày",format:"DD/MM/YYYY","value-format":"YYYY-MM-DD",style:{width:"150px"}},null,8,["modelValue"])]),_:1}),t(u,{label:"Phòng ban"},{default:a(()=>[t(N,{modelValue:n.departmentId,"onUpdate:modelValue":l[2]||(l[2]=e=>n.departmentId=e),placeholder:"Tất cả",clearable:"",style:{width:"160px"}},{default:a(()=>[(i(!0),g(w,null,V(E.value,e=>(i(),h(C,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(u,{label:"Trạng thái"},{default:a(()=>[t(N,{modelValue:n.status,"onUpdate:modelValue":l[3]||(l[3]=e=>n.status=e),placeholder:"Tất cả",clearable:"",style:{width:"140px"}},{default:a(()=>[(i(!0),g(w,null,V(o(re),e=>(i(),h(C,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(u,{label:"Mức độ"},{default:a(()=>[t(N,{modelValue:n.level,"onUpdate:modelValue":l[4]||(l[4]=e=>n.level=e),placeholder:"Tất cả",clearable:"",style:{width:"140px"}},{default:a(()=>[(i(!0),g(w,null,V(o(ue),e=>(i(),h(C,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(u,null,{default:a(()=>[t(f,{type:"primary",icon:o(ce),onClick:L},{default:a(()=>[...l[7]||(l[7]=[r(" Tìm kiếm ",-1)])]),_:1},8,["icon"]),t(f,{icon:o(pe),onClick:I},{default:a(()=>[...l[8]||(l[8]=[r(" Đặt lại ",-1)])]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),p("div",Se,[p("div",we,[l[10]||(l[10]=p("h3",{class:"content-card-title"},"Danh sách Phản ánh",-1)),o(P).hasRole(["ADMIN","RECEIVER"])?(i(),h(f,{key:0,type:"primary",icon:o(Q),onClick:B},{default:a(()=>[...l[9]||(l[9]=[r(" Nhập mới ",-1)])]),_:1},8,["icon"])):J("",!0)]),Z((i(),h(O,{data:y.value,stripe:"",style:{width:"100%"},onRowClick:x,"row-class-name":"clickable-row"},{default:a(()=>[t(d,{prop:"code",label:"Số PA",width:"145"}),t(d,{prop:"receivedDate",label:"Ngày nhận",width:"105"},{default:a(({row:e})=>[r(v(o(he)(e.receivedDate)),1)]),_:1}),t(d,{prop:"channel",label:"Kênh",width:"90"},{default:a(({row:e})=>[t(S,{size:"small",effect:"plain"},{default:a(()=>[r(v(o(_e)(e.channel)),1)]),_:2},1024)]),_:1}),t(d,{prop:"content",label:"Nội dung","min-width":"200"},{default:a(({row:e})=>[t(F,{content:e.content,placement:"top","show-after":500},{default:a(()=>[p("span",Ve,v(e.content),1)]),_:2},1032,["content"])]),_:1}),t(d,{prop:"departmentName",label:"Phòng ban","min-width":"110"}),t(d,{prop:"level",label:"Mức độ",width:"95",align:"center"},{default:a(({row:e})=>[t(S,{type:o(ge)(e.level),size:"small"},{default:a(()=>[r(v(o(be)(e.level)),1)]),_:2},1032,["type"])]),_:1}),t(d,{prop:"status",label:"Trạng thái",width:"110",align:"center"},{default:a(({row:e})=>[t(S,{type:o(ke)(e.status),size:"small"},{default:a(()=>[r(v(o(ye)(e.status)),1)]),_:2},1032,["type"])]),_:1}),t(d,{prop:"handlerName",label:"Người xử lý","min-width":"130"}),t(d,{label:"",width:"80",fixed:"right",align:"center"},{default:a(({row:e})=>[t(f,{type:"primary",link:"",onClick:Ee(Ye=>R(e.id),["stop"])},{default:a(()=>[...l[11]||(l[11]=[r(" Chi tiết ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[j,k.value]]),p("div",Le,[t($,{"current-page":m.value,"onUpdate:currentPage":l[5]||(l[5]=e=>m.value=e),"page-size":T.value,"onUpdate:pageSize":l[6]||(l[6]=e=>T.value=e),"page-sizes":o(ee),total:D.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:z,onCurrentChange:A},null,8,["current-page","page-size","page-sizes","total"])])])])}}},je=G(Me,[["__scopeId","data-v-ba1eab74"]]);export{je as default};
