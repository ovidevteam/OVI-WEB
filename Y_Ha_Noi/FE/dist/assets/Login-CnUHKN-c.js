import{_ as I,u as Q,r as g,a as C,c as f,b as l,d as o,w as s,e as F,E as T,f as A,g as H,o as c,h as M,i as P,j as u,k as G,l as K,m as j,n as X,p as r,q as Y,s as J,t as D,v as O,x as W,y as z}from"./index-BgKCwKch.js";/* empty css                    */const Z="/images/logo-footer.png",ee={class:"login-card"},oe={class:"login-footer"},le={key:0},se={class:"forgot-desc"},te={key:1,class:"forgot-success"},ne={class:"success-icon"},ae={key:0},re={key:1},ie={class:"demo-accounts"},ue={class:"demo-list"},de={__name:"Login",setup(me){const N=H(),b=Q(),h=g(null),n=C({username:"",password:"",remember:!1}),R={username:[{required:!0,message:"Vui lòng nhập tên đăng nhập",trigger:"blur"}],password:[{required:!0,message:"Vui lòng nhập mật khẩu",trigger:"blur"}]},y=async()=>{if(h.value)try{await h.value.validate();const a=await b.login({username:n.username,password:n.password});a.success?(z.success("Đăng nhập thành công!"),N.push("/dashboard")):z.error(a.message)}catch{}},v=(a,e)=>{n.username=a,n.password=e},d=g(!1),w=g(null),k=g(!1),m=g(!1),i=C({email:""}),S={email:[{required:!0,message:"Vui lòng nhập email",trigger:"blur"},{type:"email",message:"Email không hợp lệ",trigger:"blur"}]},B=()=>{i.email="",m.value=!1,d.value=!0},L=async()=>{if(w.value)try{await w.value.validate(),k.value=!0,await new Promise(a=>setTimeout(a,1500)),m.value=!0,k.value=!1}catch{k.value=!1}},U=()=>{d.value=!1,i.email="",m.value=!1};return(a,e)=>{const V=P,p=M,$=X,_=Y,x=T,E=J,q=A;return c(),f("div",ee,[e[21]||(e[21]=l("div",{class:"login-header"},[l("div",{class:"login-logo"},[l("img",{src:Z,alt:"BV Y Hà Nội",class:"login-logo-img"})]),l("p",{class:"login-subtitle"},"Hệ thống Quản lý Phản ánh")],-1)),o(x,{ref_key:"formRef",ref:h,model:n,rules:R,class:"login-form",onSubmit:F(y,["prevent"])},{default:s(()=>[o(p,{prop:"username"},{default:s(()=>[o(V,{modelValue:n.username,"onUpdate:modelValue":e[0]||(e[0]=t=>n.username=t),placeholder:"Tên đăng nhập",size:"large","prefix-icon":u(G),autocomplete:"username"},null,8,["modelValue","prefix-icon"])]),_:1}),o(p,{prop:"password"},{default:s(()=>[o(V,{modelValue:n.password,"onUpdate:modelValue":e[1]||(e[1]=t=>n.password=t),type:"password",placeholder:"Mật khẩu",size:"large","prefix-icon":u(j),"show-password":"",autocomplete:"current-password",onKeyup:K(y,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),o(p,null,{default:s(()=>[o($,{modelValue:n.remember,"onUpdate:modelValue":e[2]||(e[2]=t=>n.remember=t)},{default:s(()=>[...e[10]||(e[10]=[r("Ghi nhớ đăng nhập",-1)])]),_:1},8,["modelValue"])]),_:1}),o(p,null,{default:s(()=>[o(_,{type:"primary",size:"large",class:"login-button",loading:u(b).loading,onClick:y},{default:s(()=>[...e[11]||(e[11]=[r(" Đăng nhập ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),l("div",oe,[l("a",{href:"#",class:"forgot-password",onClick:F(B,["prevent"])},"Quên mật khẩu?")]),o(q,{modelValue:d.value,"onUpdate:modelValue":e[5]||(e[5]=t=>d.value=t),title:"Quên mật khẩu",width:"420px",class:"forgot-dialog","close-on-click-modal":!1,"append-to-body":"",modal:!0},{footer:s(()=>[m.value?(c(),f("div",re,[o(_,{type:"primary",onClick:U},{default:s(()=>[...e[19]||(e[19]=[r(" Quay lại đăng nhập ",-1)])]),_:1})])):(c(),f("div",ae,[o(_,{onClick:e[4]||(e[4]=t=>d.value=!1)},{default:s(()=>[...e[17]||(e[17]=[r("Hủy",-1)])]),_:1}),o(_,{type:"primary",onClick:L,loading:k.value},{default:s(()=>[...e[18]||(e[18]=[r(" Gửi yêu cầu ",-1)])]),_:1},8,["loading"])]))]),default:s(()=>[m.value?(c(),f("div",te,[l("div",ne,[o(E,{size:48,color:"#10b981"},{default:s(()=>[o(u(O))]),_:1})]),e[15]||(e[15]=l("h3",null,"Đã gửi email!",-1)),l("p",null,[e[13]||(e[13]=r("Vui lòng kiểm tra hộp thư ",-1)),l("strong",null,W(i.email),1),e[14]||(e[14]=r(" và làm theo hướng dẫn để khôi phục mật khẩu.",-1))]),e[16]||(e[16]=l("p",{class:"note"},"Nếu không thấy email, hãy kiểm tra thư mục Spam.",-1))])):(c(),f("div",le,[l("p",se,[o(E,{size:20,class:"forgot-icon"},{default:s(()=>[o(u(D))]),_:1}),e[12]||(e[12]=r(" Nhập email đăng ký, chúng tôi sẽ gửi link khôi phục mật khẩu. ",-1))]),o(x,{ref_key:"forgotFormRef",ref:w,model:i,rules:S,"label-position":"top"},{default:s(()=>[o(p,{prop:"email",label:"Email"},{default:s(()=>[o(V,{modelValue:i.email,"onUpdate:modelValue":e[3]||(e[3]=t=>i.email=t),placeholder:"example@bvyhanoi.vn",size:"large","prefix-icon":u(D)},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1},8,["model"])]))]),_:1},8,["modelValue"]),l("div",ie,[e[20]||(e[20]=l("p",{class:"demo-title"},"Demo Accounts:",-1)),l("div",ue,[l("span",{onClick:e[6]||(e[6]=t=>v("admin","admin123"))},"Admin"),l("span",{onClick:e[7]||(e[7]=t=>v("leader","leader123"))},"Lãnh đạo"),l("span",{onClick:e[8]||(e[8]=t=>v("receiver","receiver123"))},"Tiếp nhận"),l("span",{onClick:e[9]||(e[9]=t=>v("handler","handler123"))},"Xử lý")])])])}}},fe=I(de,[["__scopeId","data-v-9796b869"]]);export{fe as default};
