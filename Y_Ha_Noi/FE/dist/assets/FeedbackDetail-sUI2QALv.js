import{_ as D,c as r,o as d,d as n,A as C,X as h,w as s,J as B,K as G,aj as H,ak as P,al as M,j as i,am as T,b as a,x as l,Q as w,T as b,p as c,U as S,s as R,M as $,r as I,B as O,W as V,Z as F,q as z,R as K,an as U,ao as q,g as j,S as Q,ap as W,a6 as J}from"./index-BgKCwKch.js";/* empty css                   *//* empty css                             *//* empty css               */import{f as X}from"./feedbackService-D0bxWCqD.js";import{I as x}from"./ImageGallery-DvHV4AeL.js";/* empty css                 *//* empty css                         */const Z={class:"feedback-timeline"},Y={class:"timeline-content"},ee={class:"timeline-header"},te={class:"action-label"},ae={class:"user-name"},ne={key:0,class:"timeline-body"},se={key:0},le={key:1,class:"status-change"},oe={__name:"FeedbackTimeline",props:{logs:{type:Array,default:()=>[]}},setup(p){const v=u=>({CREATE:"primary",ASSIGN:"info",STATUS_CHANGE:"warning",COMPLETE:"success",COMMENT:""})[u]||"",g=u=>({CREATE:"Tạo mới",ASSIGN:"Phân công",STATUS_CHANGE:"Thay đổi trạng thái",COMPLETE:"Hoàn thành",COMMENT:"Ghi chú"})[u]||u;return(u,e)=>{var _;const m=w,f=R,y=M,o=H,N=P;return d(),r("div",Z,[n(o,null,{default:s(()=>[(d(!0),r(B,null,G(p.logs,t=>(d(),C(y,{key:t.id,timestamp:i(T)(t.createdDate),type:v(t.action),hollow:t.action==="CREATE",placement:"top"},{default:s(()=>[a("div",Y,[a("div",ee,[a("span",te,l(g(t.action)),1),a("span",ae,l(t.userName),1)]),t.note||t.oldStatus?(d(),r("div",ne,[t.note?(d(),r("p",se,l(t.note),1)):h("",!0),t.oldStatus&&t.newStatus?(d(),r("p",le,[n(m,{type:i(b)(t.oldStatus),size:"small"},{default:s(()=>[c(l(i(S)(t.oldStatus)),1)]),_:2},1032,["type"]),n(f,{class:"arrow-icon"},{default:s(()=>[n(i($))]),_:1}),n(m,{type:i(b)(t.newStatus),size:"small"},{default:s(()=>[c(l(i(S)(t.newStatus)),1)]),_:2},1032,["type"])])):h("",!0)])):h("",!0)])]),_:2},1032,["timestamp","type","hollow"]))),128))]),_:1}),(_=p.logs)!=null&&_.length?h("",!0):(d(),C(N,{key:0,description:"Chưa có lịch sử xử lý"}))])}}},ce=D(oe,[["__scopeId","data-v-35a80ce7"]]),ie={class:"feedback-detail"},de={class:"detail-header"},re={class:"header-left"},ue={class:"header-info"},he={class:"feedback-code"},_e={class:"header-meta"},me={class:"detail-content"},pe={class:"content-card info-card"},ve={class:"content-text"},ge={key:0,class:"content-card"},fe={class:"content-card"},ye={key:1,class:"content-card"},Ne={class:"process-result"},Te={key:0,class:"process-images"},be={__name:"FeedbackDetail",setup(p){const v=q(),g=j(),u=I(!1),e=I(null),m=async()=>{u.value=!0;try{e.value=await X.getById(v.params.id)}catch{e.value={id:1,code:"PA-20251127-001",receivedDate:"2025-11-27T09:30:00",channel:"HOTLINE",content:"Phản ánh về thái độ phục vụ của nhân viên khoa Nội khi tiếp nhận bệnh nhân. Nhân viên không nhiệt tình hướng dẫn, khiến bệnh nhân phải chờ đợi lâu.",departmentName:"Nội khoa",doctorName:"BS. Nguyễn Văn A",level:"HIGH",status:"PROCESSING",receiverName:"Nguyễn Thị Tiếp nhận",handlerName:"BS. Nguyễn Văn A",handlerId:1,images:[{id:1,url:"https://via.placeholder.com/300x200"},{id:2,url:"https://via.placeholder.com/300x200"}],logs:[{id:1,action:"CREATE",createdDate:"2025-11-27T09:30:00",userName:"Nguyễn Thị Tiếp nhận",note:"Tạo phản ánh mới"},{id:2,action:"ASSIGN",createdDate:"2025-11-27T09:35:00",userName:"Hệ thống",note:"Phân công cho BS. Nguyễn Văn A"},{id:3,action:"STATUS_CHANGE",createdDate:"2025-11-27T10:00:00",userName:"BS. Nguyễn Văn A",oldStatus:"NEW",newStatus:"PROCESSING",note:"Bắt đầu xử lý"}]}}finally{u.value=!1}},f=()=>{g.back()};return O(()=>{m()}),(y,o)=>{var k,A;const N=z,_=w,t=W,E=U,L=F;return V((d(),r("div",ie,[e.value?(d(),r(B,{key:0},[a("div",de,[a("div",re,[n(N,{onClick:f},{default:s(()=>[...o[0]||(o[0]=[c("Quay lại",-1)])]),_:1}),a("div",ue,[a("h2",he,l(e.value.code),1),a("div",_e,[n(_,{type:i(b)(e.value.status),size:"large"},{default:s(()=>[c(l(i(S)(e.value.status)),1)]),_:1},8,["type"]),n(_,{type:i(K)(e.value.level),size:"large",effect:"plain"},{default:s(()=>[c(l(i(Q)(e.value.level)),1)]),_:1},8,["type"])])])])]),a("div",me,[a("div",pe,[o[1]||(o[1]=a("div",{class:"content-card-header"},[a("h3",{class:"content-card-title"},"Thông tin phản ánh")],-1)),n(E,{column:2,border:""},{default:s(()=>[n(t,{label:"Ngày tiếp nhận"},{default:s(()=>[c(l(i(T)(e.value.receivedDate)),1)]),_:1}),n(t,{label:"Kênh tiếp nhận"},{default:s(()=>[n(_,{size:"small",effect:"plain"},{default:s(()=>[c(l(i(J)(e.value.channel)),1)]),_:1})]),_:1}),n(t,{label:"Phòng ban"},{default:s(()=>[c(l(e.value.departmentName),1)]),_:1}),n(t,{label:"Bác sĩ liên quan"},{default:s(()=>[c(l(e.value.doctorName||"Không có"),1)]),_:1}),n(t,{label:"Người tiếp nhận"},{default:s(()=>[c(l(e.value.receiverName),1)]),_:1}),n(t,{label:"Người xử lý"},{default:s(()=>[c(l(e.value.handlerName||"Chưa phân công"),1)]),_:1}),n(t,{label:"Nội dung",span:2},{default:s(()=>[a("div",ve,l(e.value.content),1)]),_:1})]),_:1})]),((k=e.value.images)==null?void 0:k.length)>0?(d(),r("div",ge,[o[2]||(o[2]=a("div",{class:"content-card-header"},[a("h3",{class:"content-card-title"},"Hình ảnh đính kèm")],-1)),n(x,{images:e.value.images},null,8,["images"])])):h("",!0),a("div",fe,[o[3]||(o[3]=a("div",{class:"content-card-header"},[a("h3",{class:"content-card-title"},"Lịch sử xử lý")],-1)),n(ce,{logs:e.value.logs},null,8,["logs"])]),e.value.status==="COMPLETED"?(d(),r("div",ye,[o[5]||(o[5]=a("div",{class:"content-card-header"},[a("h3",{class:"content-card-title"},"Kết quả xử lý")],-1)),a("div",Ne,[n(E,{column:1,border:""},{default:s(()=>[n(t,{label:"Ngày hoàn thành"},{default:s(()=>[c(l(i(T)(e.value.completedDate)),1)]),_:1}),n(t,{label:"Ghi nhận xử lý"},{default:s(()=>[c(l(e.value.processNote||"Không có ghi chú"),1)]),_:1})]),_:1}),((A=e.value.processImages)==null?void 0:A.length)>0?(d(),r("div",Te,[o[4]||(o[4]=a("h4",null,"Hình ảnh minh chứng",-1)),n(x,{images:e.value.processImages},null,8,["images"])])):h("",!0)])])):h("",!0)])],64)):h("",!0)])),[[L,u.value]])}}},Be=D(be,[["__scopeId","data-v-174bd094"]]);export{Be as default};
